# Chapter 17: ROS 2의 물리량 표준 단위
## 01. ROS 2의 표준 단위의 필요성
- `016 ROS 2 인터페이스 (interface)` 강좌에서 설명하였던 msg, service, action 인터페이스는 노드 간에 데이터를 주고받는데 사용된다.
- 그 내용에는 어떤 `이름`으로 어떠한 `자료형`으로 데이터를 보내느냐가 기술되어 있다.
- 예를 들어 geometry_msgs/msgs/Twist 메시지 형태는 float64 자료형의 linear.x, linear.y, linear.z, angular.x, angular.y, angular.z 값을 사용하고 있다.
- 이는 병진 속도 3개, 회전 속도 3개를 의미하는데 단위가 틀린다면 어떻게 될까?
- 개발자는 m/s와 rad/s로 정의하여 개발하였는데 사용자가 cm/s, degree/s로 생각하여 사용하면 어떻게 될까?
- 아마 원하는 결과물을 얻을 수 없을 수 없는 것은 물론이고 자칫 큰 사고로 이어질 수도 있다.
- 이처럼 단위의 불일치는 개발자와 사용자 간의 불편을 겪게 하고 치명적인 소프트웨어 버그로 이어질 수도 있다.
- 단위의 경우 변환 프로그램을 추가로 넣는 방법도 있긴 하지만 이렇게 하면 데이터 변환으로 인해 불필요한 계산이 발생한다.
- 이에 ROS 커뮤니티에서는 ROS 개발 초기(2010년)부터 이러한 단위 불일치로 인한 문제를 줄이기 위해 표준 단위에 관한 규칙을 세웠다.

## 02. ROS 2의 표준 단위
- ROS 커뮤니티에서는 ROS 프로그래밍에 사용하는 표준 단위로 세계적으로 가장 널리 사용되고 있는 국제단위계인 `SI 단위(SI unit)`와 국제단위계의 일곱 개 기본 단위를 조합해 만들어진 `SI 유도 단위(SI derived unit)`을 표준 단위로 정하였다.
- SI 단위는 총 7개이고 SI 유도 단위에는 20개가 있는데 로봇공학에서 주로 사용하는 단위는 표와 같다.
- 예를 들어 메시지를 전송할 때에는 데이터의 종류에 따라 배터리의 전압 단위는 volt (V)단위를 사용하며, 각의 크기는 radian (rad)을 사용하며, 길이는 meter (m)단위를 써야 한다.
- 그리고 시간과 관련한 조합 또한 이러한 규칙을 따르는데 예를 들어 병진 속도는 m/s 단위를 회전 속도는 rad/s 사용해야 한다.
- 처음 사용하는 분들은 좀 어색할 있어도 사용하다 보면 딱 정해놓고 있어서 프로그램 간 고민 없이 단위를 통일할 수 있고 커뮤니티에 공개된 다양한 패키지들을 사용함에 있어서도 단위로 인해 잘못된 사용이나 버그, 불필요한 변환 연산을 줄일 수 있다.
- 이에 ROS 커뮤니티에서는 물리량을 표현할 때 길이(length)는 미터(meter, m), 질량(mass)은 킬로그램(kilogram, kg), 시간(time)은 초(second, s), 전류는(current) 암페어(ampere, A), 각(angle)은 라디안(radian, rad), 주기(frequency)는 헤르츠(hertz, Hz), 힘(force)은 뉴턴(newton, N), 일률(power)은 와트(watt, W), 전압(voltage)은 볼트(volt, V), 온도(temperature)는 섭씨(celsius, °C), 자기장은 테슬라(tesla, T)를 사용한다.

|물리량|단위 (SI unit)|물리량|단위 (SI derived unit)|
|:---:|:---:|:---:|:---:|
|length|meter (m)|angle|radian (rad)|
|mass|kilogram (kg)|frequency|hertz (Hz)|
|time|second (s)|force|newton (N)|
|current|ampere (A)|power|watt (W)|
|-|-|voltage|volt (V)|
|-|-|temperature|celsius (°C)|
|-|-|magnetism|tesla (T)|

## 03. ROS 2의 표준 단위 사용
- ROS 커뮤니티에서는 노드 간에 주고받는 데이터의 이름과 자료형을 `ROS 2 인터페이스 (interface)`에서 규정하고 있으며 단위는 REP-103에서 표준 단위를 정해놓았다.
- 이는 앞서 말한 바와 같이 공개된 다양한 패키지들을 사용함에 있어서도 단위로 인해 잘못된 사용이나 버그, 불필요한 변환 연산을 줄일 수 있다.
- 지금까지 사용하던 단위가 조금 달랐다고 하더라도 지금부터라도 ROS 프로그래밍할 때에는 표준 단위를 사용하여 비표준 단위를 사용함에 따른 문제를 미연에 방지하도록 하자.

[출처] 017 ROS 2의 물리량 표준 단위 (오픈소스 소프트웨어 & 하드웨어: 로봇 기술 공유 카페 (오로카)) | 작성자 표윤석
